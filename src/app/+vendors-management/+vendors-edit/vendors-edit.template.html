<form [formGroup]="frm" role="form" novalidate="" (ngSubmit)="onSubmitForm()">
  <div class="row general">
    <div class="col-lg-12 general-title">
      <span class="bold">General</span>
    </div>
    <div class="col-lg-3 general-body py-2">
      <div class="row flex general-info"
           [ngClass]="{'required': true}">
        <div class="col-sm-4 control-label text-right">
          <label>Company</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('company').valid}">
          <input formControlName='company'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Company' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('company').hasError('required') && !frm.get('company').pristine">
            {{validationMessages['company'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': true}">
        <div class="col-sm-4 control-label text-right">
          <label>Types</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('typeIds').valid}">
          <ng-select [items]="typeData" #vendorTypeSelect
                     [multiple]="true"
                     [closeOnSelect]="false"
                     [hideSelected]="true"
                     [searchable]="false"
                     [placeholder]="!isPageReadOnly ? 'Types' : ''"
                     (focus)="onSelectFocused(vendorTypeSelect)"
                     bindLabel="name"
                     bindValue="id"
                     formControlName="typeIds"></ng-select>
          <label class="error"
                 *ngIf="frm.get('typeIds').hasError('required') && !frm.get('typeIds').pristine">
            {{validationMessages['typeIds'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': false}">
        <div class="col-sm-4 control-label text-right">
          <label>Email</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('email').valid}">
          <input formControlName='email'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Email' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('email').hasError('required') && !frm.get('email').pristine">
            {{validationMessages['email'].required}}</label>
          <label class="error"
                 *ngIf="frm.get('email').hasError('pattern') && !frm.get('email').pristine">
            {{validationMessages['email'].pattern}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': false}">
        <div class="col-sm-4 control-label text-right">
          <label>Phone</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('phone').valid}">
          <input formControlName='phone'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Phone' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('phone').hasError('required') && !frm.get('phone').pristine">
            {{validationMessages['phone'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': false}">
        <div class="col-sm-4 control-label text-right">
          <label>Cell</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('cell').valid}">
          <input formControlName='cell'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Cell' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('cell').hasError('required') && !frm.get('cell').pristine">
            {{validationMessages['cell'].required}}</label>
        </div>
      </div>
    </div>
    <div class="col-lg-3 general-body py-2">
      <div class="row flex general-info"
           [ngClass]="{'required': true}">
        <div class="col-sm-4 control-label text-right">
          <label>Address  1</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('address1').valid}">
          <input formControlName='address1'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Address 1' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('address1').hasError('required') && !frm.get('address1').pristine">
            {{validationMessages['address1'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': false}">
        <div class="col-sm-4 control-label text-right">
          <label>Address 2</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('address2').valid}">
          <input formControlName='address2'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Address 2' : ''"
                 class="form-control">
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': true}">
        <div class="col-sm-4 control-label text-right">
          <label>City</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('city').valid}">
          <input formControlName='city'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'City' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('city').hasError('required') && !frm.get('city').pristine">
            {{validationMessages['city'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': true}">
        <div class="col-sm-4 control-label text-right">
          <label>State</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('state').valid}">
          <input formControlName='state'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'State' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('state').hasError('required') && !frm.get('state').pristine">
            {{validationMessages['state'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': true}">
        <div class="col-sm-4 control-label text-right">
          <label>Country</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('country').valid}">
          <input formControlName='country'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Country' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('country').hasError('required') && !frm.get('country').pristine">
            {{validationMessages['country'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': false}">
        <div class="col-sm-4 control-label text-right">
          <label>State/Region</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('region').valid}">
          <input formControlName='region'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'State/Region' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('region').hasError('required') && !frm.get('region').pristine">
            {{validationMessages['region'].required}}</label>
        </div>
      </div>
      <div class="row flex general-info"
           [ngClass]="{'required': false}">
        <div class="col-sm-4 control-label text-right">
          <label class="nowrap">Zip/Postal Code</label>
        </div>
        <div class="col-sm-8"
             [ngClass]="{'has-error':!frm.get('postalCode').valid}">
          <input formControlName='postalCode'
                 type="text"
                 [placeholder]="!isPageReadOnly ? 'Zip/Postal Code' : ''"
                 class="form-control">
          <label class="error"
                 *ngIf="frm.get('postalCode').hasError('required') && !frm.get('postalCode').pristine">
            {{validationMessages['postalCode'].required}}</label>
        </div>
      </div>
    </div>
  </div>
  <div class="row general">
    <div class="col-lg-12 general-title">
      <span class="bold">Contact</span>
    </div>
    <div class="col-lg-6 general-body">
      <div formArrayName="contacts">
        <div class="py-2" *ngFor="let contact of contacts.controls; let i=index; let last=last" [formGroupName]="i" >
          <div class="row flex general-info name-info m-b-5"
               [ngClass]="{'required': false}">
            <div class="col-sm-2 control-label text-right">
              <label>Name</label>
            </div>
            <div class="col-sm-4"
                 [ngClass]="{'has-error':!contact.get('firstName').valid}">
              <input formControlName='firstName'
                     type="text"
                     [placeholder]="!isPageReadOnly ? 'First Name' : ''"
                     class="form-control">
              <label class="error"
                     *ngIf="contact.get('firstName').hasError('required') && !contact.get('firstName').pristine">
                {{validationMessages['firstName'].required}}</label>
            </div>
            <div class="col-sm-4"
                 [ngClass]="{'has-error':!contact.get('lastName').valid}">
              <input formControlName='lastName'
                     type="text"
                     [placeholder]="!isPageReadOnly ? 'Last Name' : ''"
                     class="form-control">
              <label class="error"
                     *ngIf="contact.get('lastName').hasError('required') && !contact.get('lastName').pristine">
                {{validationMessages['lastName'].required}}</label>
            </div>
          </div>
          <div class="row flex general-info m-b-5"
               [ngClass]="{'required': false}">
            <div class="col-sm-2 control-label text-right">
              <label>Email</label>
            </div>
            <div class="col-sm-4"
                 [ngClass]="{'has-error':!contact.get('email').valid}">
              <input formControlName='email'
                     type="text"
                     [placeholder]="!isPageReadOnly ? 'Email' : ''"
                     class="form-control">
              <label class="error"
                     *ngIf="contact.get('email').hasError('required') && !contact.get('email').pristine">
                {{validationMessages['email'].required}}</label>
              <label class="error"
                     *ngIf="contact.get('email').hasError('pattern') && !contact.get('email').pristine">
                {{validationMessages['email'].pattern}}</label>
            </div>
          </div>
          <div class="row flex general-info m-b-5"
               [ngClass]="{'required': false}">
            <div class="col-sm-2 control-label text-right">
              <label>Phone</label>
            </div>
            <div class="col-sm-4"
                 [ngClass]="{'has-error':!contact.get('phone').valid}">
              <input formControlName='phone'
                     type="text"
                     [placeholder]="!isPageReadOnly ? 'Phone' : ''"
                     class="form-control">
              <label class="error"
                     *ngIf="contact.get('phone').hasError('required') && !contact.get('phone').pristine">
                {{validationMessages['phone'].required}}</label>
            </div>
          </div>
          <div class="row flex general-info">
            <div class="col-sm-2 control-label text-right">
              <label>Cell</label>
            </div>
            <div class="col-sm-4"
                 [ngClass]="{'has-error':!contact.get('cell').valid}">
              <input formControlName='cell'
                     type="text"
                     [placeholder]="!isPageReadOnly ? 'Cell' : ''"
                     class="form-control">
              <label class="error"
                     *ngIf="contact.get('cell').hasError('required') && !contact.get('cell').pristine">
                {{validationMessages['cell'].required}}</label>
            </div>
          </div>
          <div class="row flex general-info"
               [ngClass]="{'required': false}">
            <div class="col-sm-2 control-label text-right">
              <label>Role</label>
            </div>
            <div class="col-sm-4"
                 [ngClass]="{'has-error':!contact.get('role').valid}">
              <ng-select [items]="roleData" #roleSelect
                         [searchable]="false"
                         [placeholder]="!isPageReadOnly ? 'Role' : ''"
                         (focus)="onSelectFocused(roleSelect)"
                         bindLabel="name"
                         bindValue="id"
                         formControlName="role"></ng-select>
              <label class="error"
                     *ngIf="contact.get('role').hasError('required') && !contact.get('role').pristine">
                {{validationMessages['role'].required}}</label>
            </div>
          </div>
          <div class="row flex general-info">
            <div class="col-sm-6">
              <button class="btn btn-complete pull-left" type="button" (click)="addContact()" *ngIf="last">+ Add a Contact</button>
            </div>
            <div class="col-sm-6">
              <button type="button" class="btn btn-danger pull-right" (click)="deleteContact(i)">
                Delete This Contact
              </button>
            </div>
          </div>
        </div>
        <div class="py-2" *ngIf="!contacts.value.length">
          <button class="btn btn-complete" type="button" (click)="addContact()">+ Add a Contact</button>
        </div>
        <hr class="m-t-5 m-b-20">
      </div>
    </div>
  </div>
  <div class="row col-lg-6">
    <div class="col-lg-12">
      <button class="btn btn-complete" *ngIf="vendorInfo?.id"
              type="submit">
        Save
      </button>
      <button class="btn btn-complete" *ngIf="!vendorInfo?.id"
              type="submit">
        Save
      </button>
      <!--<button class="btn btn-default" (click)="cancel()">-->
        <!--Cancel-->
      <!--</button>-->
    </div>
  </div>
  <div class="sticky-btn" *ngIf="isShowStickyBtn">
      <button class="btn btn-complete" *ngIf="vendorInfo?.id"
              type="submit">
        Save
      </button>
      <button class="btn btn-complete" *ngIf="!vendorInfo?.id"
              type="submit">
        Save
      </button>
  </div>
</form>
